###
# Generated by Chef for [<%= node[:fqdn] %>]
# Environment: <%= node.chef_environment %>
###

pid file = /var/run/rsyncd.pid
use chroot = yes
read only = yes
syslog facility=daemon
lock file = /var/run/rsyncd.lock
log file = /var/log/rsyncd.log

#-----------------------#

<% @shares.each do |entry| -%>
[<%= entry[:name] %>]
<% unless entry[:path].nil? %>
	path = <%= entry[:path] %>
<% end %>
<% unless entry[:comment].nil? %>
	comment = <%= entry[:comment] %>
<% end %>
<% unless entry[:uid].nil? %>
	uid = <%= entry[:uid] %>
<% end %>
<% unless entry[:gid].nil? %>
	gid = <%= entry[:gid] %>
<% end %>
<% unless entry[:hosts_allow].nil? %>
	hosts allow = <%= entry[:hosts_allow] %>
<% end %>
<% unless entry[:read_only].nil? %>
	read only = <%= entry[:read_only] %>
<% end %>
<% unless entry[:write_only].nil? %>
	write only = <%= entry[:write_only] %>
<% end %>
<% unless entry[:list].nil? %>
	list = <%= entry[:list] %>
<% end %>
<% unless entry[:exclude].nil? %>
	exclude = <%= entry[:exclude] %>
<% end %>
<% unless entry[:secrets].nil? %>
	secrets file = /etc/rsyncd.secrets.<%= entry[:secrets] %>
<% end %>
#-----------------------#

<% end -%>
